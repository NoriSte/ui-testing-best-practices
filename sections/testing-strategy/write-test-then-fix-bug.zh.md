# 发现了 bug？先编写测试，然后再着手修复

<br/>

## 一段简要说明

所以，当你在前端应用程序中发现错误并已经进行了调试时，你可以系统地复现它，准备好修复它。以测试为导向的思维必须经历以下步骤：

1. 确定预期的行为。
2. 编写一个测试，旨在以正确的方式使用前端应用程序。
3. 测试必须失败，因为错误不允许用户完成任务。
4. 修复错误。
5. 检查测试现在是否通过。

为什么要采用这种方法？为什么要编写测试呢？我知道直接修复错误可能看起来更快，但请考虑以下几点：

- 通常情况下，你的测试工具比你更快地达到显示错误的应用程序状态（参见[使用测试工具作为主要开发工具](/sections/generic-best-practices/use-your-testing-tool-as-your-primary-development-tool.zh.md) 章节）。

- 有时你认为你能够系统地复现错误，但这并不总是正确的。编写一个揭示错误的测试可以确保你百分之百确定错误是可重现的，**排除了许多偏差变量**，如现有的会话、缓存、服务工作者、浏览器扩展、浏览器版本等，这些可能会影响你的信心。有时你可能会发现你并没有完全正确地识别错误。

- 与此同时，当测试通过了你的修复时，你确实知道你的解决方

案按预期工作。可能影响错误识别过程的相同变量可能会影响工作效果的虚假感觉。

- **有了测试，错误就可以永远修复了！** 测试将被执行成千上万次，让你对错误修复感到百分之百的信心。

- 成功的测试可以作为你所做工作的验证轨迹。

最后但同样重要的是：确保你编写的测试一开始是失败的！而且它之所以失败是因为有错误！

<br/>

测试不仅仅是为了重现错误并在视觉上检查它，而是必须在修复错误后获得积极的反馈。**与错误相关的测试如果一开始就没有失败，那真的非常危险**，因为你可能认为你做得很好，而实际上你从一开始就没有完全正确地重现错误。

作为一般规则：**破碎的流程必须有一个破碎的测试**，一个成功的测试必须与一个正常工作的应用程序相关联。
